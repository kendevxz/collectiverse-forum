<div class="post__site__content">
  <div class="site__content__left">
    <div class="posts__container">
      <span class="post__title"><%= @post.title %></span>
      <span class="post__desc"><%= @post.user.username %> in <%= @post.category.name %> at <%= @post.created_at %></span>
      <span class="post__show__content"><%= @post.content %></span>
      <div class="comments__container">
        <div class="post__comment" data-controller="insert-in-list" data-insert-in-list-position-value="beforeend">
          <div data-insert-in-list-target="items" data-comments-counter-controller="comments">
            <%= render "comments/form", post: @post, comment: @comment %>
          </div>
        </div>
        <div class="line__border"></div>
        <% if @post.comments.blank? %>
          Be the first to leave a comment!
        <% else %>
        <div class="comments__box">
          <span data-action="comments#updateCount" data-comments-counter-target="count"> <%# Does not update yet.... %>
            <%= pluralize @post.comments.size, "comments" %>
          </span>
        </div>
        <div class="comments__big__box">
          <div class="comments_box">
            <% @post.comments.each do |comment| %>
              <div data-controller="reply-subcomment">
                <div data-controller="insert-subcomment-in-list" data-insert-subcomment-in-list-position-value="beforeend">
                  <%= render 'posts/comment', comment: comment %>
                  <div class="comments__big__box">
                    <div class="comments_box">
                    <div data-insert-subcomment-in-list-target="subcomments">
                      <% comment.subcomments.each do |subcomment| %>
                        <%= render 'posts/subcomment', subcomment: subcomment %>
                      <% end %>
                      </div>
                    </div>
                  </div>
                  <%= render "subcomments/form", comment: comment, subcomment: @subcomment %>
              </div>
            </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="site__content__right">
    <div class="board">
      <% if user_signed_in? %>
      <div class="board__container">
        <span class="board__main__text"><%= @post.category.name %></span>
        <div class="line__border"></div>
        <div class="board__sub">
          <div class="board__sub__container">
            <span class="sub__main__text"> 1.2k </span>
            <span class="sub__title__text"> Karma </span>
          </div>
          <div class="board__sub__container">
            <span class="sub__main__text"> 3.6k </span>
            <span class="sub__title__text"> Posts </span>
          </div>
          <div class="board__sub__container">
            <span class="sub__main__text"> 901 </span>
            <span class="sub__title__text"> Trades </span>
          </div>
        </div>
      </div>
      <div class="board__profile__image" style="background-image: url(https://cdn.medcom.id/dynamic/content/2023/04/18/1559704/jnwhtaluoy.jpg?w=1024);">
      </div>
      <% else %>
      <div class="board__container">
        <span class="board__main__text">Home Page</span>
        <span class="board__main__text"><%= link_to "Login", new_user_session_path, class: "btn button__login nav__item" %></span>
      </div>
      <% end %>
    </div>
    <div class="board">
      <div class="board__container">
        <span class="board__main__text">Top Categories</span>
        <div class="line__border"></div>
        <div class="board__content">
          <% Category.all.first(10).each do |category| %>
          <%# logic might need to be changed %>
            <%= link_to category_path(category) do  %>
            <span class="board__content__text"><%= category.name %></span>
            <% end %>
          <% end %>
          <%= link_to 'All Categories', categories_path, class: "board__additional__button" %>
        </div>
      </div>
    </div>
    <div class="board">
      <div class="board__container">
        <span class="board__main__text">Top Users</span>
        <div class="line__border"></div>
        <div class="board__content">
          <% User.all.first(10).each do |user| %>
          <%# logic might need to be changed %>
            <%# <%= link_to user_path(user) do  %>
            <span class="board__content__text"><%= user.username %> - 2.3k Karma</span>
            <%# <% end %>
          <% end %>
        </div>
      </div>
    </div>
    <div class="board">
      <div class="board__container">
        <span class="board__main__text">Top Traders</span>
        <div class="line__border"></div>
        <div class="board__content">
          <% User.all.first(10).each do |user| %>
          <%# logic might need to be changed %>
            <%# <%= link_to user_path(user) do  %>
            <span class="board__content__text"><%= user.username %> - 5k Trades</span>
            <%# <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
